<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>快打旋風6 × New Challenger 活動日程</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&family=Oswald:wght@500;700&display=swap');
        
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #0d1117;
            background-image: 
                radial-gradient(circle at 20% 20%, rgba(30, 41, 59, 0.4) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(15, 23, 42, 0.4) 0%, transparent 50%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }

        .oswald { font-family: 'Oswald', sans-serif; }

        /* 標題設計 */
        .main-title {
            font-weight: 900;
            font-size: 2.5rem;
            letter-spacing: 2px;
            background: linear-gradient(to right, #ffffff, #60a5fa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(96, 165, 250, 0.3);
        }

        /* 每日卡片區塊 */
        .day-group {
            margin-bottom: 3rem;
        }

        .day-label {
            display: inline-block;
            background: #1e293b;
            padding: 4px 20px;
            border-radius: 4px 20px 0 0;
            font-weight: 700;
            color: #38bdf8;
            border-left: 4px solid #38bdf8;
            margin-bottom: -1px;
            position: relative;
            z-index: 10;
        }

        .day-content {
            background: rgba(22, 27, 34, 0.8);
            border: 1px solid #30363d;
            border-radius: 0 12px 12px 12px;
            padding: 1rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* 時間槽佈局 */
        .time-row {
            display: flex;
            border-bottom: 1px solid rgba(48, 54, 61, 0.5);
            padding: 12px 0;
            align-items: center;
        }
        .time-row:last-child { border-bottom: none; }

        .time-indicator {
            width: 120px;
            flex-shrink: 0;
            font-family: 'Oswald', sans-serif;
            font-size: 0.95rem;
            color: #8b949e;
            text-align: center;
            border-right: 1px solid #30363d;
            margin-right: 15px;
            line-height: 1.2;
        }

        .event-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 12px;
            width: 100%;
        }

        /* 角色關卡卡片 */
        .char-card {
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 10px 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
            position: relative;
        }

        /* 隱藏邏輯：當全域不顯示完成且該卡片已勾選時隱藏 */
        body.hide-completed .char-card.is-completed {
            display: none !important;
        }

        /* 難度發光邊框 */
        .diff-easy { border-left: 4px solid #22c55e; box-shadow: inset 5px 0 10px -5px rgba(34, 197, 94, 0.3); }
        .diff-mid { border-left: 4px solid #3b82f6; box-shadow: inset 5px 0 10px -5px rgba(59, 130, 246, 0.3); }
        .diff-hard { border-left: 4px solid #f97316; box-shadow: inset 5px 0 10px -5px rgba(249, 115, 22, 0.3); }
        .diff-extreme { border-left: 4px solid #ef4444; box-shadow: inset 5px 0 10px -5px rgba(239, 68, 68, 0.3); }

        .char-info { display: flex; flex-direction: column; }
        .char-name { font-weight: 700; font-size: 1rem; color: #f0f6fc; }
        .char-diff { font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }

        .diff-text-easy { color: #4ade80; }
        .diff-text-mid { color: #60a5fa; }
        .diff-text-hard { color: #fb923c; }
        .diff-text-extreme { color: #f87171; }

        /* 已完成樣式 */
        .char-card.is-completed {
            opacity: 0.5;
            filter: grayscale(0.5);
        }

        /* 自定義 Checkbox */
        .complete-cb {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: #38bdf8;
            border-radius: 4px;
        }

        /* 控制面板 */
        .controls {
            background: rgba(30, 41, 59, 0.5);
            padding: 10px 24px;
            border-radius: 30px;
            border: 1px solid rgba(56, 189, 248, 0.2);
            margin-bottom: 2rem;
            display: flex;
            gap: 24px;
            font-size: 0.85rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .active-row {
            background: rgba(56, 189, 248, 0.05);
        }
        .active-row .time-indicator {
            color: #38bdf8;
            font-weight: bold;
        }

        /* 切換按鈕樣式 */
        .toggle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
        }
        .toggle-btn input { display: none; }
        .toggle-switch {
            width: 40px;
            height: 20px;
            background: #334155;
            border-radius: 20px;
            position: relative;
            transition: 0.3s;
        }
        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            top: 2px;
            left: 2px;
            transition: 0.3s;
        }
        .toggle-btn input:checked + .toggle-switch {
            background: #38bdf8;
        }
        .toggle-btn input:checked + .toggle-switch::after {
            left: 22px;
        }
    </style>
</head>
<body class="max-w-5xl mx-auto hide-completed">

    <header class="py-10 text-center">
        <h1 class="main-title mb-2">STREET FIGHTER VI</h1>
        <p class="text-slate-500 tracking-[0.4em] text-sm uppercase">New Challenger Schedule</p>
    </header>

    <div class="flex justify-center">
        <div class="controls items-center">
            <div class="flex items-center gap-2">
                <span id="live-clock" class="oswald text-sky-400 font-bold">00:00:00</span>
            </div>
            <div class="h-4 w-[1px] bg-slate-700 hidden md:block"></div>
            
            <!-- 查看已完成開關 -->
            <label class="toggle-btn">
                <span class="text-slate-300">顯示已完成關卡</span>
                <input type="checkbox" id="show-completed-toggle" onchange="toggleCompletedVisibility()">
                <div class="toggle-switch"></div>
            </label>

            <div class="h-4 w-[1px] bg-slate-700"></div>
            <button onclick="resetFilters()" class="hover:text-sky-400 transition-colors text-slate-300">重設所有狀態</button>
        </div>
    </div>

    <div id="schedule-root">
        <!-- 內容由 JS 生成 -->
    </div>

    <script>
        // 從 CSV 提取的資料
        const scheduleData = [
    { date: "2026-01-09", slots: { 13: "VS布蘭卡 初級|VS塔爾錫 初級", 15: "VS櫻 困難|VS路克 困難", 17: "VS肯 初級|VS本田 初級", 19: "VS倩咪 困難|VS蛛俐 困難" }},
    { date: "2026-01-10", slots: { 0: "VS肯 困難|VS本田 困難", 2: "VS倩咪 初級|VS蛛俐 初級", 4: "VS布蘭卡 困難|VS塔爾錫 困難", 6: "VS櫻 初級|VS路克 初級", 8: "VS蓋爾 困難|VS桑吉爾夫 困難", 10: "VS沙卡特 中級|VS貝卡 中級", 12: "VS隆 困難|VS春麗 困難", 14: "VS拜森 中級|VS巴洛克 中級" }},
    { date: "2026-01-11", slots: { 0: "VS布蘭卡 初級|VS塔爾錫 初級", 2: "VS櫻 困難|VS路克 困難", 4: "VS肯 初級|VS本田 初級", 6: "VS倩咪 困難|VS蛛俐 困難", 8: "VS布蘭卡 困難|VS塔爾錫 困難", 10: "VS肯 困難|VS本田 困難", 12: "VS倩咪 初級|VS蛛俐 初級", 14: "VS櫻 初級|VS路克 初級", 16: "VS隆 困難|VS春麗 困難", 18: "VS拜森 中級|VS巴洛克 中級", 20: "VS蓋爾 困難|VS桑吉爾夫 困難", 22: "VS沙卡特 中級|VS貝卡 中級" }},
    { date: "2026-01-12", slots: { 0: "VS布蘭卡 困難|VS塔爾錫 困難", 2: "VS肯 困難|VS本田 困難", 4: "VS倩咪 初級|VS蛛俐 初級", 6: "VS櫻 初級|VS路克 初級", 8: "VS布蘭卡 初級|VS塔爾錫 初級", 10: "VS櫻 困難|VS路克 困難", 12: "VS肯 初級|VS本田 初級", 14: "VS倩咪 困難|VS蛛俐 困難", 16: "VS蓋爾 困難|VS桑吉爾夫 困難", 18: "VS沙卡特 中級|VS貝卡 中級", 20: "VS隆 困難|VS春麗 困難", 22: "VS拜森 中級|VS巴洛克 中級" }},
    { date: "2026-01-17", slots: { 0: "VS肯 初級|VS本田 初級", 2: "VS倩咪 困難|VS蛛俐 困難", 4: "VS布蘭卡 初級|VS塔爾錫 初級", 6: "VS櫻 困難|VS路克 困難", 8: "VS蓋爾 初級|VS桑吉爾夫 初級", 10: "VS沙卡特 超級難|VS貝卡 超級難", 12: "VS隆 初級|VS春麗 初級", 14: "VS拜森 超級難|VS巴洛克 超級難" }},
    { date: "2026-01-18", slots: { 0: "VS隆 困難|VS櫻 初級", 2: "VS蓋爾 困難|VS倩咪 初級", 4: "VS布蘭卡 困難|VS拜森 中級", 6: "VS肯 困難|VS沙卡特 中級" }},
    { date: "2026-01-19", slots: { 0: "VS布蘭卡 初級", 2: "VS拜森 超級難", 4: "VS倩咪 初級", 6: "VS布蘭卡 困難", 8: "VS隆 初級", 10: "VS倩咪 困難", 12: "VS拜森 中級", 14: "VS隆 困難" }},
    { date: "2026-01-20", slots: { 0: "VS塔爾錫 困難|VS巴洛克 中級", 2: "VS春麗 困難|VS蛛俐 初級", 4: "VS巴洛克 超級難|VS塔爾錫 初級", 6: "VS蛛俐 困難|VS春麗 初級" }}
];        // 讀取隱藏清單 (LocalStorage)
        let completedEvents = JSON.parse(localStorage.getItem('sf6_completed_events') || '[]');
        let showCompleted = JSON.parse(localStorage.getItem('sf6_show_completed') || 'false');

        function getDiffKey(text) {
            if (text.includes("超級難")) return "extreme";
            if (text.includes("困難")) return "hard";
            if (text.includes("中級")) return "mid";
            return "easy";
        }

        function toggleEvent(eventUniqueKey) {
            if (completedEvents.includes(eventUniqueKey)) {
                completedEvents = completedEvents.filter(key => key !== eventUniqueKey);
            } else {
                completedEvents.push(eventUniqueKey);
            }
            localStorage.setItem('sf6_completed_events', JSON.stringify(completedEvents));
            render();
        }

        function toggleCompletedVisibility() {
            showCompleted = document.getElementById('show-completed-toggle').checked;
            localStorage.setItem('sf6_show_completed', JSON.stringify(showCompleted));
            updateBodyClass();
        }

        function updateBodyClass() {
            if (showCompleted) {
                document.body.classList.remove('hide-completed');
            } else {
                document.body.classList.add('hide-completed');
            }
        }

        function resetFilters() {
            if(confirm("確定要重設所有關卡的完成狀態嗎？")) {
                completedEvents = [];
                localStorage.setItem('sf6_completed_events', JSON.stringify(completedEvents));
                render();
            }
        }

        function render() {
            const root = document.getElementById('schedule-root');
            root.innerHTML = '';
            const now = new Date();
            const todayStr = now.toISOString().split('T')[0];
            const currentHour = now.getHours();

            // 更新開關狀態
            document.getElementById('show-completed-toggle').checked = showCompleted;
            updateBodyClass();

            scheduleData.forEach(day => {
                const dayGroup = document.createElement('div');
                dayGroup.className = 'day-group';
                
                const isToday = day.date === todayStr;
                
                let dayHtml = `
                    <div class="day-label">${day.date} ${isToday ? '(今天)' : ''}</div>
                    <div class="day-content">
                `;

                // 排序時段
                const sortedHours = Object.keys(day.slots).map(Number).sort((a,b) => a-b);
                
                sortedHours.forEach(hour => {
                    const isActive = isToday && currentHour >= hour && currentHour < hour + 2;
                    const startTime = hour.toString().padStart(2, '0') + ":00";
                    const endTime = ((hour + 2) % 24).toString().padStart(2, '0') + ":00";
                    
                    const eventString = day.slots[hour];
                    const events = eventString.split('|');
                    
                    dayHtml += `
                        <div class="time-row ${isActive ? 'active-row' : ''}">
                            <div class="time-indicator">
                                <div class="oswald">${startTime}</div>
                                <div class="text-[10px] opacity-40">~</div>
                                <div class="oswald">${endTime}</div>
                            </div>
                            <div class="event-grid">
                    `;

                    events.forEach(eventText => {
                        const isCompleted = completedEvents.includes(eventText);
                        const diffKey = getDiffKey(eventText);
                        const parts = eventText.split(' ');
                        const name = parts[0];
                        const diff = parts[1] || '一般';

                        dayHtml += `
                            <div class="char-card diff-${diffKey} ${isCompleted ? 'is-completed' : ''}">
                                <div class="char-info">
                                    <span class="char-name">${name}</span>
                                    <span class="char-diff diff-text-${diffKey}">${diff}</span>
                                </div>
                                <input type="checkbox" class="complete-cb" 
                                    ${isCompleted ? 'checked' : ''} 
                                    onclick="toggleEvent('${eventText}')"
                                    title="標記為已完成">
                            </div>
                        `;
                    });

                    dayHtml += `</div></div>`;
                });

                dayHtml += `</div>`;
                dayGroup.innerHTML = dayHtml;
                root.appendChild(dayGroup);
            });
        }

        function updateClock() {
            const now = new Date();
            document.getElementById('live-clock').textContent = now.toLocaleTimeString('zh-TW', { hour12: false });
        }

        window.onload = () => {
            render();
            updateClock();
            setInterval(updateClock, 1000);
        };
    </script>
</body>
</html>